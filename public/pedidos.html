<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>Painel de Pedidos</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header>
    <div style="display:flex;justify-content:space-between;align-items:center">
      <h1 style="margin:0">Painel de Pedidos â€” Conversas em tempo real</h1>
      <div style="display:flex;gap:8px;align-items:center">
        <div style="display:flex;flex-direction:column;align-items:flex-end;margin-right:12px;font-size:13px">
          <div style="color:var(--muted)">Total hoje (produtos): R$ <span id="header-total-produtos" style="color:#3a8;font-weight:bold">0.00</span></div>
          <div style="color:var(--muted)">ğŸ’° <strong style="color:#2ecc71">Entregas hoje: R$ <span id="header-total-entregues" style="color:#2ecc71;font-weight:bold;font-size:15px">0.00</span></strong></div>
        </div>
        <button id="btn-dashboard" class="icon-btn" style="background:#e74c3c;color:#fff;padding:8px 10px;border-radius:8px">ğŸ“Š Dashboard</button>
        <button id="btn-entregues" class="icon-btn" style="background:#444;color:#fff;padding:8px 10px;border-radius:8px">ğŸ“¦ Entregues</button>
        <button id="btn-cardapio" class="icon-btn" style="background:#3a8;color:#fff;padding:8px 10px;border-radius:8px">ğŸ“– CardÃ¡pio</button>
        <button id="btn-mensagens" class="icon-btn" style="background:#9b59b6;color:#fff;padding:8px 10px;border-radius:8px">ğŸ¤– Mensagens</button>
      </div>
    </div>
    <div id="legend" style="margin-top:10px; display:flex; gap:10px; align-items:center;">
      <div style="display:flex;gap:6px;align-items:center"><span style="width:12px;height:12px;border-radius:3px;display:inline-block;background:#f1c40f"></span><small style="color:#cfcfcf">Pedindo / Em confirmaÃ§Ã£o</small></div>
      <div style="display:flex;gap:6px;align-items:center"><span style="width:12px;height:12px;border-radius:3px;display:inline-block;background:#3498db"></span><small style="color:#cfcfcf">Coletando endereÃ§o</small></div>
      <div style="display:flex;gap:6px;align-items:center"><span style="width:12px;height:12px;border-radius:3px;display:inline-block;background:#2ecc71"></span><small style="color:#cfcfcf">Finalizado</small></div>
      <div style="display:flex;gap:6px;align-items:center"><span style="width:12px;height:12px;border-radius:3px;display:inline-block;background:#95a5a6"></span><small style="color:#cfcfcf">Outros</small></div>
    </div>
  </header>
  <main>
    <div id="lista"></div>
  </main>

  <!-- Modal: Pedidos Entregues -->
  <div id="entregues-modal" class="modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); backdrop-filter:blur(20px); align-items:center; justify-content:center; z-index:2500;">
    <div style="background:rgba(255,255,255,0.1); backdrop-filter:blur(20px); border:1px solid rgba(255,255,255,0.2); color:#fff; width:820px; max-width:98%; border-radius:16px; padding:24px; box-shadow:0 20px 60px rgba(0,0,0,0.3);">
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <h2 style="margin:0; font-size:20px; font-weight:600;">ğŸ“¦ Pedidos Entregues / Saiu para entrega - HOJE</h2>
        <div style="display:flex; gap:12px;">
          <button id="entregues-refresh" class="icon-btn" style="background:linear-gradient(135deg,#3b82f6,#1d4ed8); color:#fff;">ğŸ”„ Atualizar</button>
          <button id="entregues-close" class="icon-btn secondary">âœ• Fechar</button>
        </div>
      </div>
      <div id="entregues-body" style="margin-top:20px; max-height:540px; overflow:auto; padding-top:8px;"></div>
    </div>
  </div>

  <!-- Modal de Conversa -->
  <div id="conversation-modal" class="modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); backdrop-filter:blur(20px); align-items:center; justify-content:center; z-index:2000;">
    <div id="conversation-content" style="background:rgba(255,255,255,0.1); backdrop-filter:blur(20px); border:1px solid rgba(255,255,255,0.2); color:#fff; width:720px; max-width:95%; border-radius:16px; padding:24px; box-shadow:0 20px 60px rgba(0,0,0,0.3);">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <h2 id="conv-title" style="margin:0; font-size:18px; font-weight:600;"></h2>
        <div style="display:flex; gap:8px; flex-wrap:wrap;">
          <button id="conv-open-wa" class="icon-btn" style="background:linear-gradient(135deg,#25d366,#128c7e);">ğŸ’¬ WhatsApp</button>
          <button id="conv-edit-name" class="icon-btn" style="background:linear-gradient(135deg,var(--warning),#d97706);">âœï¸ Editar</button>
          <button id="conv-print" class="icon-btn secondary">ğŸ–¨ï¸ Imprimir</button>
          <button id="conv-close" class="icon-btn secondary">âœ• Fechar</button>
        </div>
      </div>
      <div id="conv-body" style="margin-top:20px; display:grid; grid-template-columns:1fr 360px; gap:16px;">
        <div id="conv-messages" style="background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); border-radius:12px; padding:16px; max-height:420px; overflow:auto;"></div>
        <div style="background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); border-radius:12px; padding:16px; max-height:420px; overflow:auto;">
          <h4 style="margin-top:0; color:#fff; font-weight:600;">ğŸ›’ Carrinho</h4>
          <div id="conv-cart"></div>
          <p class="small" style="margin-top:12px; padding-top:12px; border-top:1px solid rgba(255,255,255,0.1);">Taxa de entrega: R$ <span id="conv-taxa">0.00</span></p>
          <p class="small" style="margin-top:8px; font-weight:600; font-size:14px;"><strong>ğŸ’° VALOR TOTAL:</strong> R$ <span id="conv-valor">0.00</span></p>
        </div>
      </div>
      <!-- Input para enviar mensagem como admin -->
      <div style="margin-top:20px; display:flex; gap:12px; align-items:flex-end;">
        <textarea id="conv-input" placeholder="Digite uma mensagem para o cliente..." style="flex:1;padding:12px;border-radius:12px;background:rgba(255,255,255,0.1);color:#fff;border:1px solid rgba(255,255,255,0.2);height:64px;resize:none"></textarea>
        <button id="conv-send" class="icon-btn" style="background:linear-gradient(135deg,var(--success),#059669);">ğŸ“¤ Enviar</button>
      </div>
      <!-- Admin quick actions: reset, clear cart, add item, finalizar -->
      <div style="margin-top:16px; display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
        <button id="conv-reset" class="icon-btn" style="background:linear-gradient(135deg,#8b5cf6,#7c3aed);">ğŸ”„ Resetar</button>
        <button id="conv-clear" class="icon-btn danger">ğŸ—‘ï¸ Limpar</button>
        <input id="conv-add-input" placeholder="1 dallas, sem bacon" style="flex:1;min-width:200px;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.2);background:rgba(255,255,255,0.1);color:#fff" />
        <button id="conv-add" class="icon-btn" style="background:linear-gradient(135deg,#3b82f6,#1d4ed8);">â• Adicionar</button>
        <button id="conv-finalizar" class="icon-btn" style="background:linear-gradient(135deg,var(--success),#059669);">âœ… Finalizar</button>
      </div>
    </div>
  </div>

      <!-- Modal: Pedido Detalhe (abrir Ãºltimo pedido) -->
      <div id="pedido-detail-modal" class="modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); backdrop-filter:blur(20px); align-items:center; justify-content:center; z-index:2700;">
        <div style="background:rgba(255,255,255,0.1); backdrop-filter:blur(20px); border:1px solid rgba(255,255,255,0.2); color:#fff; width:720px; max-width:98%; border-radius:16px; padding:24px; box-shadow:0 20px 60px rgba(0,0,0,0.3);">
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <h2 id="pedido-detail-title" style="margin:0; font-size:20px; font-weight:600;">ğŸ“‹ Detalhes do Pedido</h2>
            <div>
              <button id="pedido-detail-close" class="icon-btn secondary">âœ• Fechar</button>
            </div>
          </div>
          <div id="pedido-detail-body" style="margin-top:20px; max-height:520px; overflow:auto;">
            <!-- ConteÃºdo preenchido dinamicamente -->
          </div>
        </div>
      </div>

      <!-- Modal: Dashboard -->
      <div id="dashboard-modal" class="modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); backdrop-filter:blur(20px); align-items:center; justify-content:center; z-index:2800;">
        <div style="background:rgba(255,255,255,0.1); backdrop-filter:blur(20px); border:1px solid rgba(255,255,255,0.2); color:#fff; width:500px; max-width:95%; border-radius:16px; padding:24px; box-shadow:0 20px 60px rgba(0,0,0,0.3);">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;">
            <h2 style="margin:0;font-size:24px;font-weight:700;display:flex;align-items:center;gap:8px;background:linear-gradient(135deg,#ff6b6b,#ee5a24);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">ğŸ“Š Dashboard Financeiro</h2>
            <button id="dashboard-close" class="icon-btn secondary">âœ•</button>
          </div>
          
          <div style="display:grid;gap:20px;">
            <!-- Valor Total Geral -->
            <div style="background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.2);padding:24px;border-radius:16px;text-align:center;box-shadow:0 8px 32px rgba(0,0,0,0.1);transition:all 0.3s ease;">
              <div style="font-size:14px;color:rgba(255,255,255,0.8);margin-bottom:12px;font-weight:500;">ğŸ’° VALOR TOTAL GERAL</div>
              <div style="font-size:36px;font-weight:700;color:#fff;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">R$ <span id="dashboard-total-geral">0.00</span></div>
              <div style="font-size:12px;color:rgba(255,255,255,0.6);margin-top:8px;">Produtos + Entregas</div>
            </div>
            
            <!-- Valor dos Produtos -->
            <div style="background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.2);padding:24px;border-radius:16px;text-align:center;box-shadow:0 8px 32px rgba(0,0,0,0.1);transition:all 0.3s ease;">
              <div style="font-size:14px;color:rgba(255,255,255,0.8);margin-bottom:12px;font-weight:500;">ğŸ” VALOR DOS PRODUTOS</div>
              <div style="font-size:36px;font-weight:700;color:#fff;background:linear-gradient(135deg,#10b981,#059669);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">R$ <span id="dashboard-total-produtos">0.00</span></div>
              <div style="font-size:12px;color:rgba(255,255,255,0.6);margin-top:8px;">Apenas itens do cardÃ¡pio</div>
            </div>
            
            <!-- Valor das Entregas -->
            <div style="background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.2);padding:24px;border-radius:16px;text-align:center;box-shadow:0 8px 32px rgba(0,0,0,0.1);transition:all 0.3s ease;">
              <div style="font-size:14px;color:rgba(255,255,255,0.8);margin-bottom:12px;font-weight:500;">ğŸšš VALOR DAS ENTREGAS</div>
              <div style="font-size:36px;font-weight:700;color:#fff;background:linear-gradient(135deg,#f59e0b,#d97706);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">R$ <span id="dashboard-total-entregas">0.00</span></div>
              <div style="font-size:12px;color:rgba(255,255,255,0.6);margin-top:8px;">Taxas de entrega</div>
            </div>
          </div>
          
          <div style="margin-top:24px;text-align:center;">
            <button id="dashboard-refresh" class="icon-btn" style="background:linear-gradient(135deg,#ff6b6b,#ee5a24);font-size:16px;padding:14px 28px;">ğŸ”„ Atualizar Dados</button>
          </div>
        </div>
      </div>

      <!-- Modal de CardÃ¡pio Unificado -->
      <div id="cardapio-modal" class="modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); backdrop-filter:blur(20px); align-items:center; justify-content:center; z-index:2600;">
        <div style="background:rgba(255,255,255,0.1); backdrop-filter:blur(20px); border:1px solid rgba(255,255,255,0.2); color:#fff; width:95%; max-width:1400px; height:95%; max-height:900px; border-radius:16px; overflow:hidden; box-shadow:0 20px 60px rgba(0,0,0,0.3);">
          <div style="background:rgba(255,255,255,0.1); padding:20px; border-bottom:1px solid rgba(255,255,255,0.2);">
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <h2 style="margin:0;font-size:24px;font-weight:700;display:flex;align-items:center;gap:8px;background:linear-gradient(135deg,#3b82f6,#1d4ed8);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">ğŸ½ï¸ Gerenciamento Unificado do CardÃ¡pio</h2>
              <button id="cardapio-close" class="icon-btn secondary">âœ•</button>
            </div>
          </div>
          
          <!-- Abas de NavegaÃ§Ã£o -->
          <div class="cardapio-tabs" style="background:rgba(255,255,255,0.05);display:flex;border-bottom:1px solid rgba(255,255,255,0.2);">
            <button class="tab-btn active" data-tab="visualizar" style="flex:1;padding:15px;background:transparent;border:0;color:#fff;cursor:pointer;border-bottom:3px solid #3498db;font-weight:bold;transition:all 0.3s ease;">
              ğŸ“‹ Visualizar & Editar
            </button>
            <button class="tab-btn" data-tab="adicionar" style="flex:1;padding:15px;background:transparent;border:0;color:rgba(255,255,255,0.6);cursor:pointer;border-bottom:3px solid transparent;font-weight:bold;transition:all 0.3s ease;">
              â• Adicionar Item
            </button>
            <button class="tab-btn" data-tab="mapeamentos" style="flex:1;padding:15px;background:transparent;border:0;color:rgba(255,255,255,0.6);cursor:pointer;border-bottom:3px solid transparent;font-weight:bold;transition:all 0.3s ease;">
              ğŸ”— Mapeamentos
            </button>
            <button class="tab-btn" data-tab="configuracoes" style="flex:1;padding:15px;background:transparent;border:0;color:rgba(255,255,255,0.6);cursor:pointer;border-bottom:3px solid transparent;font-weight:bold;transition:all 0.3s ease;">
              âš™ï¸ ConfiguraÃ§Ãµes
            </button>
          </div>
          
          <div class="modal-body" style="padding:0;height:calc(100% - 140px);overflow:hidden;">
            <!-- Aba Visualizar & Editar -->
            <div id="tab-visualizar" class="tab-content active" style="height:100%;padding:20px;overflow-y:auto;">
              <!-- Barra de Ferramentas -->
              <div class="toolbar" style="display:flex;gap:15px;margin-bottom:20px;flex-wrap:wrap;align-items:center;">
                <div style="display:flex;gap:10px;align-items:center;">
                  <input type="text" id="buscar-item-unified" placeholder="ğŸ” Buscar item..." style="padding:12px 16px;border:1px solid rgba(255,255,255,0.2);border-radius:12px;background:rgba(255,255,255,0.1);color:#fff;width:250px;">
                  <select id="filtro-tipo-unified" style="padding:12px 16px;border:1px solid rgba(255,255,255,0.2);border-radius:12px;background:rgba(255,255,255,0.1);color:#fff;">
                    <option value="">Todos os tipos</option>
                    <option value="Lanche">ğŸ” Lanches</option>
                    <option value="Bebida">ğŸ¥¤ Bebidas</option>
                    <option value="Adicional">ğŸ§€ Adicionais</option>
                    <option value="Sobremesa">ğŸ° Sobremesas</option>
                  </select>
                </div>
                <div style="display:flex;gap:10px;">
                  <button id="refresh-cardapio-unified" class="icon-btn" style="background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;">ğŸ”„ Atualizar</button>
                  <button id="export-cardapio" class="icon-btn" style="background:linear-gradient(135deg,#10b981,#059669);color:#fff;">ğŸ“¤ Exportar</button>
                  <button id="import-cardapio" class="icon-btn" style="background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;">ğŸ“¥ Importar</button>
                </div>
              </div>
              
              <!-- Lista de Itens com EdiÃ§Ã£o Inline -->
              <div id="lista-cardapio-unified" style="display:grid;gap:15px;"></div>
              
              <!-- BotÃ£o de Teste -->
              <div style="margin-top:20px;padding:15px;background:rgba(255,0,0,0.1);border:1px solid rgba(255,0,0,0.3);border-radius:8px;">
                <h4 style="color:#fff;margin:0 0 10px 0;">ğŸ”§ Teste de Debug</h4>
                <button onclick="console.log('Teste: cardapioManager existe?', !!window.cardapioManager); if(window.cardapioManager) { console.log('Teste: chamando editItem com ID teste'); window.cardapioManager.editItem('teste'); } else { console.log('Erro: cardapioManager nÃ£o encontrado!'); }" style="background:#ff6b6b;color:#fff;border:0;padding:8px 12px;border-radius:4px;cursor:pointer;">ğŸ§ª Testar editItem</button>
                <button onclick="console.log('cardapioManager:', window.cardapioManager); console.log('cardapioData:', window.cardapioManager?.cardapioData);" style="background:#4ecdc4;color:#fff;border:0;padding:8px 12px;border-radius:4px;cursor:pointer;margin-left:10px;">ğŸ“Š Ver Dados</button>
              </div>
            </div>
            
            <!-- Aba Adicionar Item -->
            <div id="tab-adicionar" class="tab-content" style="height:100%;padding:20px;overflow-y:auto;display:none;">
              <div style="max-width:600px;margin:0 auto;">
                <h3 style="color:#fff;margin-bottom:20px;font-size:20px;font-weight:600;">â• Adicionar Novo Item</h3>
                
                <div style="display:grid;gap:15px;">
                  <div>
                    <label style="color:#fff;display:block;margin-bottom:5px;font-weight:500;">Nome do Item *</label>
                    <input type="text" id="item-nome-unified" placeholder="Ex: X-Bacon Especial" style="width:100%;padding:12px 16px;border:1px solid rgba(255,255,255,0.2);border-radius:12px;background:rgba(255,255,255,0.1);color:#fff;">
                  </div>
                  
                  <div>
                    <label style="color:#fff;display:block;margin-bottom:5px;font-weight:500;">DescriÃ§Ã£o</label>
                    <textarea id="item-desc-unified" placeholder="DescriÃ§Ã£o detalhada do item..." style="width:100%;padding:12px 16px;border:1px solid rgba(255,255,255,0.2);border-radius:12px;background:rgba(255,255,255,0.1);color:#fff;height:80px;resize:vertical;"></textarea>
                  </div>
                  
                  <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:15px;">
                    <div>
                      <label style="color:#fff;display:block;margin-bottom:5px;font-weight:500;">PreÃ§o (R$) *</label>
                      <input type="number" id="item-preco-unified" step="0.01" min="0" placeholder="0.00" style="width:100%;padding:12px 16px;border:1px solid rgba(255,255,255,0.2);border-radius:12px;background:rgba(255,255,255,0.1);color:#fff;">
                    </div>
                    
                    <div>
                      <label style="color:#fff;display:block;margin-bottom:5px;font-weight:500;">Tipo *</label>
                      <select id="item-tipo-unified" style="width:100%;padding:12px 16px;border:1px solid rgba(255,255,255,0.2);border-radius:12px;background:rgba(255,255,255,0.1);color:#fff;">
                        <option value="Lanche">ğŸ” Lanche</option>
                        <option value="Bebida">ğŸ¥¤ Bebida</option>
                        <option value="Adicional">ğŸ§€ Adicional</option>
                        <option value="Sobremesa">ğŸ° Sobremesa</option>
                      </select>
                    </div>
                    
                    <div>
                      <label style="color:#fff;display:block;margin-bottom:5px;font-weight:500;">ID (opcional)</label>
                      <input type="text" id="item-id-unified" placeholder="Auto" style="width:100%;padding:12px 16px;border:1px solid rgba(255,255,255,0.2);border-radius:12px;background:rgba(255,255,255,0.1);color:#fff;">
                    </div>
                  </div>
                  
                  <div>
                    <label style="color:#fff;display:block;margin-bottom:5px;font-weight:500;">Gatilhos (separados por vÃ­rgula)</label>
                    <input type="text" id="item-gatilhos-unified" placeholder="x-bacon, bacon, especial" style="width:100%;padding:12px 16px;border:1px solid rgba(255,255,255,0.2);border-radius:12px;background:rgba(255,255,255,0.1);color:#fff;">
                    <small style="color:rgba(255,255,255,0.6);font-size:12px;">Palavras-chave que os clientes podem usar para encontrar este item</small>
                  </div>
                  
                  <div style="display:flex;gap:10px;margin-top:20px;">
                    <button id="salvar-item-unified" class="icon-btn" style="flex:1;background:linear-gradient(135deg,#10b981,#059669);color:#fff;padding:15px;font-weight:bold;">âœ… Salvar Item</button>
                    <button id="limpar-form-unified" class="icon-btn secondary" style="padding:15px 20px;">ğŸ—‘ï¸ Limpar</button>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Aba Mapeamentos -->
            <div id="tab-mapeamentos" class="tab-content" style="height:100%;padding:20px;overflow-y:auto;display:none;">
              <div style="display:grid;grid-template-columns:1fr 1fr;gap:30px;height:100%;">
                <!-- Lista de Mapeamentos -->
                <div>
                  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;">
                    <h3 style="color:#fff;margin:0;font-size:18px;font-weight:600;">ğŸ”— Mapeamentos Ativos</h3>
                    <button id="refresh-mapeamentos-unified" class="icon-btn" style="background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;padding:8px 12px;">ğŸ”„</button>
                  </div>
                  <div id="lista-mapeamentos-unified" style="max-height:calc(100% - 50px);overflow-y:auto;"></div>
                </div>
                
                <!-- Adicionar Mapeamento -->
                <div>
                  <h3 style="color:#fff;margin-bottom:15px;font-size:18px;font-weight:600;">â• Adicionar Mapeamento</h3>
                  
                  <div style="display:grid;gap:15px;">
                    <div>
                      <label style="color:#fff;display:block;margin-bottom:5px;font-weight:500;">Gatilho *</label>
                      <input type="text" id="novo-gatilho-unified" placeholder="Ex: x-bacon" style="width:100%;padding:12px 16px;border:1px solid rgba(255,255,255,0.2);border-radius:12px;background:rgba(255,255,255,0.1);color:#fff;">
                    </div>
                    
                    <div>
                      <label style="color:#fff;display:block;margin-bottom:5px;font-weight:500;">ID do Item *</label>
                      <input type="text" id="novo-item-id-unified" placeholder="Ex: 52" style="width:100%;padding:12px 16px;border:1px solid rgba(255,255,255,0.2);border-radius:12px;background:rgba(255,255,255,0.1);color:#fff;">
                    </div>
                    
                    <button id="adicionar-mapeamento-unified" class="icon-btn" style="background:linear-gradient(135deg,#10b981,#059669);color:#fff;padding:12px;font-weight:bold;">âœ… Adicionar Mapeamento</button>
                    
                    <hr style="border:1px solid rgba(255,255,255,0.2);margin:20px 0;">
                    
                    <h4 style="color:#fff;margin-bottom:10px;font-size:16px;font-weight:600;">ğŸ“ MÃºltiplos Gatilhos</h4>
                    <div>
                      <label style="color:#fff;display:block;margin-bottom:5px;font-weight:500;">Nome do Item</label>
                      <input type="text" id="cardapio-nome-unified" placeholder="Ex: X-Bacon" style="width:100%;padding:12px 16px;border:1px solid rgba(255,255,255,0.2);border-radius:12px;background:rgba(255,255,255,0.1);color:#fff;">
                    </div>
                    
                    <div>
                      <label style="color:#fff;display:block;margin-bottom:5px;font-weight:500;">ID do Item</label>
                      <input type="text" id="cardapio-id-unified" placeholder="Ex: 52" style="width:100%;padding:12px 16px;border:1px solid rgba(255,255,255,0.2);border-radius:12px;background:rgba(255,255,255,0.1);color:#fff;">
                    </div>
                    
                    <div>
                      <label style="color:#fff;display:block;margin-bottom:5px;font-weight:500;">Gatilhos (separados por vÃ­rgula)</label>
                      <textarea id="cardapio-gatilhos-unified" placeholder="x-bacon, bacon, especial, x bacon" style="width:100%;padding:12px 16px;border:1px solid rgba(255,255,255,0.2);border-radius:12px;background:rgba(255,255,255,0.1);color:#fff;height:80px;resize:vertical;"></textarea>
                    </div>
                    
                    <button id="adicionar-multiplos-gatilhos-unified" class="icon-btn" style="background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;padding:12px;font-weight:bold;">ğŸ”— Adicionar MÃºltiplos</button>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Aba ConfiguraÃ§Ãµes -->
            <div id="tab-configuracoes" class="tab-content" style="height:100%;padding:20px;overflow-y:auto;display:none;">
              <div style="max-width:800px;margin:0 auto;">
                <h3 style="color:#fff;margin-bottom:20px;font-size:20px;font-weight:600;">âš™ï¸ ConfiguraÃ§Ãµes do Sistema</h3>
                
                <div style="display:grid;gap:20px;">
                  <div style="background:rgba(255,255,255,0.05);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.1);padding:20px;border-radius:12px;">
                    <h4 style="color:#fff;margin-bottom:15px;font-size:16px;font-weight:600;">ğŸ’¾ Backup & RestauraÃ§Ã£o</h4>
                    <div style="display:flex;gap:10px;flex-wrap:wrap;">
                      <button id="backup-cardapio" class="icon-btn" style="background:linear-gradient(135deg,#10b981,#059669);color:#fff;">ğŸ“¤ Fazer Backup</button>
                      <button id="restore-cardapio" class="icon-btn" style="background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;">ğŸ“¥ Restaurar</button>
                      <button id="reset-cardapio" class="icon-btn danger">ğŸ—‘ï¸ Resetar Tudo</button>
                    </div>
                  </div>
                  
                  <div style="background:rgba(255,255,255,0.05);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.1);padding:20px;border-radius:12px;">
                    <h4 style="color:#fff;margin-bottom:15px;font-size:16px;font-weight:600;">ğŸ”„ SincronizaÃ§Ã£o</h4>
                    <div style="display:flex;gap:10px;flex-wrap:wrap;">
                      <button id="sync-servidor" class="icon-btn" style="background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;">ğŸ”„ Sincronizar com Servidor</button>
                      <button id="force-reload" class="icon-btn" style="background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;">âš¡ Recarregar ForÃ§ado</button>
                    </div>
                  </div>
                  
                  <div style="background:rgba(255,255,255,0.05);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.1);padding:20px;border-radius:12px;">
                    <h4 style="color:#fff;margin-bottom:15px;font-size:16px;font-weight:600;">ğŸ“Š EstatÃ­sticas</h4>
                    <div id="cardapio-stats" style="color:rgba(255,255,255,0.6);">Carregando estatÃ­sticas...</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>



  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/pedidos.js"></script>
  
  <script>
    // Dashboard Modal
    document.getElementById('btn-dashboard').addEventListener('click', () => {
      document.getElementById('dashboard-modal').style.display = 'flex';
      loadDashboardData();
    });

    document.getElementById('dashboard-close').addEventListener('click', () => {
      document.getElementById('dashboard-modal').style.display = 'none';
    });

    document.getElementById('dashboard-refresh').addEventListener('click', () => {
      loadDashboardData();
    });

    // BotÃ£o Painel de Mensagens
    document.getElementById('btn-mensagens').addEventListener('click', () => {
      window.open('/painel-mensagens.html', '_blank');
    });

    // FunÃ§Ã£o para carregar dados do dashboard
        async function loadDashboardData() {
          try {
            const response = await fetch('/api/pedidos/totais-dia');
            const data = await response.json();
            
            const totalProdutos = parseFloat(data.totalProdutos) || 0;
            const totalEntregas = parseFloat(data.totalEntregas) || 0;
            const totalGeral = totalProdutos + totalEntregas;
            
            document.getElementById('dashboard-total-geral').textContent = totalGeral.toFixed(2);
            document.getElementById('dashboard-total-produtos').textContent = totalProdutos.toFixed(2);
            document.getElementById('dashboard-total-entregas').textContent = totalEntregas.toFixed(2);
          } catch (error) {
            console.error('Erro ao carregar dados do dashboard:', error);
            alert('Erro ao carregar dados do dashboard');
          }
        }

        // FunÃ§Ã£o para verificar se o dashboard estÃ¡ aberto e atualizar automaticamente
        function updateDashboardIfOpen() {
          const dashboardModal = document.getElementById('dashboard-modal');
          if (dashboardModal && dashboardModal.style.display === 'flex') {
            loadDashboardData();
          }
        }

        // AtualizaÃ§Ã£o periÃ³dica do dashboard quando estiver aberto (a cada 10 segundos)
        setInterval(() => {
          updateDashboardIfOpen();
        }, 10000);
  </script>
</body>
</html>
